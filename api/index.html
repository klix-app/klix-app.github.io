



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Klix Developer documentation">
      
      
      
        <meta name="author" content="Klix Development Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Direct integration using API - Klix Developers</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/klix.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-149580135-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
<script type="module" src="https://klix.blob.core.windows.net/stage/widget/build/klixwidget.esm.js"></script>
<script nomodule src="https://klix.blob.core.windows.net/stage/widget/build/klixwidget.js"></script>
<script type="text/javascript">window.$crisp=[];window.CRISP_WEBSITE_ID="a5ad4e02-afc6-4a09-907d-67bedb386f14";(function(){d=document;s=d.createElement("script");s.src="https://client.crisp.chat/l.js";s.async=1;d.getElementsByTagName("head")[0].appendChild(s);})();</script>

  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#klix-api" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!-- Application header -->
<header class="md-header" data-md-component="header">

    <!-- Top-level navigation -->
    <nav class="md-header-nav md-grid">
      <div class="md-flex">
  
        <!-- Link to home -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <a href=".."
              title="Klix Developers"
              class="md-header-nav__button md-logo">
            
              <img src="../images/logo.png" width="64" height="64" />
            
          </a>
        </div>
  
        <!-- Button to toggle drawer -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <label class="md-icon md-icon--menu md-header-nav__button"
              for="__drawer"></label>
        </div>
  
        <!-- Header title -->
        <div class="md-flex__cell md-flex__cell--stretch">
          <div class="md-flex__ellipsis md-header-nav__title"
              data-md-component="title">
            
              <span class="md-header-nav__topic">
                Klix Developers
              </span>
              <span class="md-header-nav__topic">
                
                  Direct integration using API
                
              </span>
            
          </div>
        </div>
  
        <!-- Button to open search dialogue -->
        <div class="md-flex__cell md-flex__cell--shrink">
          
            <label class="md-icon md-icon--search md-header-nav__button"
                for="__search"></label>
  
            <!-- Search interface -->
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        </div>
  
        <!-- Repository containing source -->
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  

<a href="https://github.com/klix-app/klix-developer-documentation-website" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    klix-app/klix-developer-documentation-website
  </div>
</a>
            </div>
          </div>
        
      </div>
    </nav>
  </header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Klix Developers" class="md-nav__button md-logo">
      
        <img src="../images/logo.png" width="48" height="48">
      
    </a>
    Klix Developers
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/klix-app/klix-developer-documentation-website" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    klix-app/klix-developer-documentation-website
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../test-environment/" title="Test environment" class="md-nav__link">
      Test environment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../plugins-for-ecommerce-platforms/" title="Plugins for eCommerce platforms" class="md-nav__link">
      Plugins for eCommerce platforms
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../libraries/" title="Libraries" class="md-nav__link">
      Libraries
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Direct integration using API
      </label>
    
    <a href="./" title="Direct integration using API" class="md-nav__link md-nav__link--active">
      Direct integration using API
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api-usage-in-single-payment-scenario" class="md-nav__link">
    API usage in single payment scenario
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-payment-step-by-step-guide" class="md-nav__link">
    Single payment step by step guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single-payment-request-examples" class="md-nav__link">
    Single payment request examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-list-of-available-payment-methods" class="md-nav__link">
    Get list of available payment methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-available-payment-methods-purchase" class="md-nav__link">
    Create available payment methods purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-whitelisted-payment-method-purchase" class="md-nav__link">
    Create whitelisted payment method purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-purchase-information" class="md-nav__link">
    Get purchase information
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-usage-in-recurring-payment-scenario" class="md-nav__link">
    API usage in recurring payment scenario
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recurring-payment-step-by-step-guide" class="md-nav__link">
    Recurring payment step by step guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-examples" class="md-nav__link">
    Request examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-an-initial-purchase-to-register-card-for-subsequent-recurring-payments" class="md-nav__link">
    Create an initial purchase to register card for subsequent recurring payments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-recurring-payment" class="md-nav__link">
    Create recurring payment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#charge-customer-card-as-a-recurring-payment" class="md-nav__link">
    Charge customer card as a recurring payment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-usage-in-reservation-scenario-payment-execution-separated-from-authorization" class="md-nav__link">
    API usage in reservation scenario (payment execution separated from authorization)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reservation-step-by-step-guide" class="md-nav__link">
    Reservation step by step guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reservation-functionality-request-examples" class="md-nav__link">
    Reservation functionality request examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-reservation-purchase" class="md-nav__link">
    Create a reservation purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#charge-funds-reserved-by-previously-created-purchase" class="md-nav__link">
    Charge funds reserved by previously created purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#charge-partial-funds-reserved-by-previously-created-purchase" class="md-nav__link">
    Charge partial funds reserved by previously created purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-funds-reserved-by-previously-created-purchase" class="md-nav__link">
    Release funds reserved by previously created purchase
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../widget-api/" title="Legacy Klix API (deprecated)" class="md-nav__link">
      Legacy Klix API (deprecated)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../static-assets/" title="Static assets" class="md-nav__link">
      Static assets
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api-usage-in-single-payment-scenario" class="md-nav__link">
    API usage in single payment scenario
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-payment-step-by-step-guide" class="md-nav__link">
    Single payment step by step guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single-payment-request-examples" class="md-nav__link">
    Single payment request examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-list-of-available-payment-methods" class="md-nav__link">
    Get list of available payment methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-available-payment-methods-purchase" class="md-nav__link">
    Create available payment methods purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-whitelisted-payment-method-purchase" class="md-nav__link">
    Create whitelisted payment method purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-purchase-information" class="md-nav__link">
    Get purchase information
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-usage-in-recurring-payment-scenario" class="md-nav__link">
    API usage in recurring payment scenario
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recurring-payment-step-by-step-guide" class="md-nav__link">
    Recurring payment step by step guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-examples" class="md-nav__link">
    Request examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-an-initial-purchase-to-register-card-for-subsequent-recurring-payments" class="md-nav__link">
    Create an initial purchase to register card for subsequent recurring payments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-recurring-payment" class="md-nav__link">
    Create recurring payment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#charge-customer-card-as-a-recurring-payment" class="md-nav__link">
    Charge customer card as a recurring payment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-usage-in-reservation-scenario-payment-execution-separated-from-authorization" class="md-nav__link">
    API usage in reservation scenario (payment execution separated from authorization)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reservation-step-by-step-guide" class="md-nav__link">
    Reservation step by step guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reservation-functionality-request-examples" class="md-nav__link">
    Reservation functionality request examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-reservation-purchase" class="md-nav__link">
    Create a reservation purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#charge-funds-reserved-by-previously-created-purchase" class="md-nav__link">
    Charge funds reserved by previously created purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#charge-partial-funds-reserved-by-previously-created-purchase" class="md-nav__link">
    Charge partial funds reserved by previously created purchase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-funds-reserved-by-previously-created-purchase" class="md-nav__link">
    Release funds reserved by previously created purchase
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="klix-api">Klix API<a class="headerlink" href="#klix-api" title="Permanent link">&para;</a></h1>
<p>Klix provides unified API for multiple payment methods - card and PSD2 bank payments. Full up-to-date REST API Reference can be found <a href="https://portal.klix.app/api">here</a>. OpenAPI document that can be used to generate API client can be found <a href="https://portal.klix.app/api/schema/v1/">here</a>.
In order to call Klix API you should first receive API credentials (Brand ID and Secret Key) from Klix representative.</p>
<h2 id="api-usage-in-single-payment-scenario">API usage in single payment scenario<a class="headerlink" href="#api-usage-in-single-payment-scenario" title="Permanent link">&para;</a></h2>
<h3 id="single-payment-step-by-step-guide">Single payment step by step guide<a class="headerlink" href="#single-payment-step-by-step-guide" title="Permanent link">&para;</a></h3>
<ol>
<li>Get list of payment methods (optional). This API end-point returns name and logo of each payment method available to merchant (Klix Card payments, Citadele and other bank PSD2 payments etc.). Use this list to render a payment methods page on your site.</li>
<li>Create a purchase by submitting order data to Klix. Once purchase is created link to Klix hosted payment page will be returned as <code class="codehilite"><span class="n">checkout_url</span></code> field value. After customer is redirected to this page Klix will handle a payment process.</li>
<li>Handle one of possible payment process outcomes:<ul>
<li>If customer payment is successful then callback is sent to merchant server and customer is redirected to successful purchase page specified by merchant. Note that you should consider purchase as successfully paid only after callback is received and purchase status is checked. Note that in case if callback is not used you can call Klix API to get purchase status once customer is redirected back to successful purchase page.</li>
<li>If customer payment fails for some reason customer is redirected to failed purchase page.</li>
<li>If cancelled payment redirect URL is specified in purchase creation request then customer will be able to go back to merchant page from Klix payment page. It's preferable to specify checkout/payment method selection page as cancelled payment redirect URL so that customer can make adjustments in shopping cart or choose different payment method.</li>
</ul>
</li>
</ol>
<h3 id="single-payment-request-examples">Single payment request examples<a class="headerlink" href="#single-payment-request-examples" title="Permanent link">&para;</a></h3>
<p>These are simple request examples that illustrate Klix API usage. Always use <a href="https://portal.klix.app/api">API Reference</a> as a single source of truth.
Note that <code class="codehilite"><span class="o">&lt;</span><span class="n">Brand</span> <span class="n">ID</span> <span class="n">goes</span> <span class="n">here</span><span class="o">&gt;</span></code> and <code class="codehilite"><span class="o">&lt;</span><span class="n">Secret</span> <span class="k">key</span> <span class="n">goes</span> <span class="n">here</span><span class="o">&gt;</span></code> should be replaced with actual <code class="codehilite"><span class="n">Brand</span> <span class="n">ID</span></code> and <code class="codehilite"><span class="n">Secret</span> <span class="k">Key</span></code> received from Klix contact person.</p>
<h4 id="get-list-of-available-payment-methods">Get list of available payment methods<a class="headerlink" href="#get-list-of-available-payment-methods" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>curl -X GET <span class="se">\</span>
  <span class="s1">&#39;https://portal.klix.app/api/v1/payment_methods/?currency=EUR&amp;brand_id=&lt;Brand ID goes here&gt;&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Connection: keep-alive&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Host: portal.klix.app&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;accept-encoding: gzip, deflate&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;cache-control: no-cache&#39;</span>
</pre></div>

<h4 id="create-available-payment-methods-purchase">Create available payment methods purchase<a class="headerlink" href="#create-available-payment-methods-purchase" title="Permanent link">&para;</a></h4>
<p>This option allows to create a purchase that can be paid using any payment method available to merchant. Customer will be have an option to choose one of available payment methods after redirect to Klix payment page.</p>
<div class="codehilite"><pre><span></span>curl -X POST <span class="se">\</span>
  https://portal.klix.app/api/v1/purchases/ <span class="se">\</span>
  -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Connection: keep-alive&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Host: portal.klix.app&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;accept-encoding: gzip, deflate&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;cache-control: no-cache&#39;</span> <span class="se">\</span>
  -d <span class="s1">&#39;{</span>
<span class="s1">   &quot;success_callback&quot;: &quot;https://your.site/api/successfully-paid-callback-will-be-sent-to-this-end-point&quot;,</span>
<span class="s1">   &quot;success_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-of-successfull-payment&quot;,</span>
<span class="s1">   &quot;failure_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-of-failed-payment&quot;,</span>
<span class="s1">   &quot;cancel_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-customer-decides-to-go-back-to-your-store-during-payment&quot;,</span>
<span class="s1">   &quot;purchase&quot;: {</span>
<span class="s1">      &quot;language&quot;: &quot;lv&quot;,</span>
<span class="s1">      &quot;products&quot;: [</span>
<span class="s1">         {</span>
<span class="s1">            &quot;price&quot;: 3000,</span>
<span class="s1">            &quot;name&quot;: &quot;Xiaomi Mi Smart Band 5&quot;</span>
<span class="s1">         },</span>
<span class="s1">         {</span>
<span class="s1">            &quot;price&quot;: 100,</span>
<span class="s1">            &quot;name&quot;: &quot;Screen protector for Xiaomi Mi Smart Band 5&quot;</span>
<span class="s1">         }</span>
<span class="s1">      ]</span>
<span class="s1">   },</span>
<span class="s1">   &quot;client&quot;: {</span>
<span class="s1">      &quot;email&quot;: &quot;test@test.com&quot;</span>
<span class="s1">   },</span>
<span class="s1">   &quot;brand_id&quot;: &quot;&lt;Brand ID goes here&gt;&quot;,</span>
<span class="s1">   &quot;reference&quot;: &quot;Your order id&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>

<h4 id="create-whitelisted-payment-method-purchase">Create whitelisted payment method purchase<a class="headerlink" href="#create-whitelisted-payment-method-purchase" title="Permanent link">&para;</a></h4>
<p>This option allows to create a purchase that can be paid only using specified whitelisted payment method. Most often this option is used to allow purchase to be paid using payment method selected on merchant web-site.</p>
<div class="codehilite"><pre><span></span>curl -X POST <span class="se">\</span>
  https://portal.klix.app/api/v1/purchases/ <span class="se">\</span>
  -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Connection: keep-alive&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Host: portal.klix.app&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;accept-encoding: gzip, deflate&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;cache-control: no-cache&#39;</span> <span class="se">\</span>
  -d <span class="s1">&#39;{</span>
<span class="s1">   &quot;success_callback&quot;: &quot;https://your.site/api/successfully-paid-callback-will-be-sent-to-this-end-point&quot;,</span>
<span class="s1">   &quot;success_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-of-successfull-payment&quot;,</span>
<span class="s1">   &quot;failure_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-of-failed-payment&quot;,</span>
<span class="s1">   &quot;cancel_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-customer-decides-to-go-back-to-your-store-during-payment&quot;,</span>
<span class="s1">   &quot;purchase&quot;: {</span>
<span class="s1">      &quot;language&quot;: &quot;lv&quot;,</span>
<span class="s1">      &quot;products&quot;: [</span>
<span class="s1">         {</span>
<span class="s1">            &quot;price&quot;: 3000,</span>
<span class="s1">            &quot;name&quot;: &quot;Xiaomi Mi Smart Band 5&quot;</span>
<span class="s1">         },</span>
<span class="s1">         {</span>
<span class="s1">            &quot;price&quot;: 100,</span>
<span class="s1">            &quot;name&quot;: &quot;Screen protector for Xiaomi Mi Smart Band 5&quot;</span>
<span class="s1">         }</span>
<span class="s1">      ]</span>
<span class="s1">   },</span>
<span class="s1">   &quot;client&quot;: {</span>
<span class="s1">      &quot;email&quot;: &quot;test@test.com&quot;</span>
<span class="s1">   },</span>
<span class="s1">   &quot;payment_method_whitelist&quot;: [&quot;klix&quot;],</span>
<span class="s1">   &quot;brand_id&quot;: &quot;&lt;Brand ID goes here&gt;&quot;,</span>
<span class="s1">   &quot;reference&quot;: &quot;Your order id&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>

<h4 id="get-purchase-information">Get purchase information<a class="headerlink" href="#get-purchase-information" title="Permanent link">&para;</a></h4>
<p><code class="codehilite"><span class="o">&lt;</span><span class="n">Purchase</span> <span class="n">ID</span><span class="o">&gt;</span></code> is purchase identifier (field <code class="codehilite"><span class="n">id</span></code> value) received in purchase creation response.</p>
<div class="codehilite"><pre><span></span>curl -X GET <span class="se">\</span>
  https://portal.klix.app/api/v1/purchases/&lt;Purchase ID&gt;/ <span class="se">\</span>
  -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Connection: keep-alive&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Host: portal.klix.app&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;accept-encoding: gzip, deflate&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;cache-control: no-cache&#39;</span>
</pre></div>

<h2 id="api-usage-in-recurring-payment-scenario">API usage in recurring payment scenario<a class="headerlink" href="#api-usage-in-recurring-payment-scenario" title="Permanent link">&para;</a></h2>
<h3 id="recurring-payment-step-by-step-guide">Recurring payment step by step guide<a class="headerlink" href="#recurring-payment-step-by-step-guide" title="Permanent link">&para;</a></h3>
<ol>
<li>Create an initial purchase with recurring flag set to <code class="codehilite"><span class="k">true</span></code> (see <code class="codehilite"><span class="ss">&quot;force_recurring&quot;</span><span class="p">:</span> <span class="k">true</span></code> in <a href="#create-an-initial-purchase-to-register-card-for-subsequent-recurring-payments">example</a>) in order to register payment card details for subsequent use in recurring payments. Created purchase <code class="codehilite"><span class="n">id</span></code> and <code class="codehilite"><span class="n">checkout_url</span></code> will be returned in response. Redirect customer to <code class="codehilite"><span class="n">checkout_url</span></code> and Klix will handle a payment process. Store this initial purchase <code class="codehilite"><span class="n">id</span></code> on your side as a recurring payment token and use it later on to charge a customer payment card (see <code class="codehilite"><span class="o">&lt;</span><span class="n">Recurring</span> <span class="n">payment</span> <span class="n">token</span><span class="o">&gt;</span></code> placeholder in <a href="#charge-customer-card-as-a-recurring-payment">example</a>). If purchase created in previous step is paid by customer then card details are successfully captured for subsequent use.</li>
<li>Once customer card should be charged in a form of a recurring payment new purchase should be created via API by specifying amount that needs to be charged and transaction description. This time <code class="codehilite"><span class="n">force_recurring</span></code> should be <code class="codehilite"><span class="k">false</span></code> or can be omitted at all (see <a href="#create-recurring-payment">example</a>). In this case only purchase <code class="codehilite"><span class="n">id</span></code> returned in response should be used in next step (see <code class="codehilite"><span class="o">&lt;</span><span class="n">Purchase</span> <span class="n">id</span> <span class="k">of</span> <span class="n">recurring</span> <span class="n">payment</span><span class="o">&gt;</span></code> placeholder in <a href="#charge-customer-card-as-a-recurring-payment">example</a>). Note that <code class="codehilite"><span class="n">checkout_url</span></code> should not be used.</li>
<li>Created purchase should be charged via API call. Note that both newly created purchase <code class="codehilite"><span class="n">id</span></code> created in step 2 and recurring payment token (purchase <code class="codehilite"><span class="n">id</span></code>) created in step 1 should be passed to this API end-point (see <a href="#charge-customer-card-as-a-recurring-payment">example</a>).</li>
</ol>
<h3 id="request-examples">Request examples<a class="headerlink" href="#request-examples" title="Permanent link">&para;</a></h3>
<p>These are simple request examples that illustrate Klix API usage. Always use <a href="https://portal.klix.app/api">API Reference</a> as a single source of truth.
Note that <code class="codehilite"><span class="o">&lt;</span><span class="n">Brand</span> <span class="n">ID</span> <span class="n">goes</span> <span class="n">here</span><span class="o">&gt;</span></code> and <code class="codehilite"><span class="o">&lt;</span><span class="n">Secret</span> <span class="k">key</span> <span class="n">goes</span> <span class="n">here</span><span class="o">&gt;</span></code> should be replaced with actual <code class="codehilite"><span class="n">Brand</span> <span class="n">ID</span></code> and <code class="codehilite"><span class="n">Secret</span> <span class="k">Key</span></code> received from Klix contact person.</p>
<h4 id="create-an-initial-purchase-to-register-card-for-subsequent-recurring-payments">Create an initial purchase to register card for subsequent recurring payments<a class="headerlink" href="#create-an-initial-purchase-to-register-card-for-subsequent-recurring-payments" title="Permanent link">&para;</a></h4>
<p>This should be done only once to make initial payment and register customer card for subsequent use.</p>
<div class="codehilite"><pre><span></span>curl -X POST <span class="se">\</span>
  https://portal.klix.app/api/v1/purchases/ <span class="se">\</span>
  -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Connection: keep-alive&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Host: portal.klix.app&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;accept-encoding: gzip, deflate&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;cache-control: no-cache&#39;</span> <span class="se">\</span>
  -d <span class="s1">&#39;{</span>
<span class="s1">   &quot;force_recurring&quot;: true,</span>
<span class="s1">   &quot;success_callback&quot;: &quot;https://your.site/api/successfully-paid-callback-will-be-sent-to-this-end-point&quot;,</span>
<span class="s1">   &quot;success_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-of-successfull-payment&quot;,</span>
<span class="s1">   &quot;failure_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-of-failed-payment&quot;,</span>
<span class="s1">   &quot;cancel_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-customer-decides-to-go-back-to-your-store-during-payment&quot;,</span>
<span class="s1">   &quot;purchase&quot;: {</span>
<span class="s1">      &quot;language&quot;: &quot;lv&quot;,</span>
<span class="s1">      &quot;products&quot;: [</span>
<span class="s1">         {</span>
<span class="s1">            &quot;price&quot;: 700,</span>
<span class="s1">            &quot;name&quot;: &quot;XYZ service subscription&quot;</span>
<span class="s1">         }</span>
<span class="s1">      ]</span>
<span class="s1">   },</span>
<span class="s1">   &quot;client&quot;: {</span>
<span class="s1">      &quot;email&quot;: &quot;test@test.com&quot;</span>
<span class="s1">   },</span>
<span class="s1">   &quot;brand_id&quot;: &quot;&lt;Brand ID goes here&gt;&quot;,</span>
<span class="s1">   &quot;reference&quot;: &quot;Your order id&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>

<h4 id="create-recurring-payment">Create recurring payment<a class="headerlink" href="#create-recurring-payment" title="Permanent link">&para;</a></h4>
<p>This should be done for each recurring payment (e.g. each month).</p>
<div class="codehilite"><pre><span></span>curl -X POST <span class="se">\</span>
  https://portal.klix.app/api/v1/purchases/ <span class="se">\</span>
  -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Connection: keep-alive&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Host: portal.klix.app&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;accept-encoding: gzip, deflate&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;cache-control: no-cache&#39;</span> <span class="se">\</span>
  -d <span class="s1">&#39;{</span>
<span class="s1">   &quot;success_callback&quot;: &quot;https://your.site/api/successfully-paid-callback-will-be-sent-to-this-end-point&quot;,</span>
<span class="s1">   &quot;purchase&quot;: {</span>
<span class="s1">      &quot;language&quot;: &quot;lv&quot;,</span>
<span class="s1">      &quot;products&quot;: [</span>
<span class="s1">         {</span>
<span class="s1">            &quot;price&quot;: 700,</span>
<span class="s1">            &quot;name&quot;: &quot;XYZ service subscription fee for December 2020&quot;</span>
<span class="s1">         }</span>
<span class="s1">      ]</span>
<span class="s1">   },</span>
<span class="s1">   &quot;client&quot;: {</span>
<span class="s1">      &quot;email&quot;: &quot;test@test.com&quot;</span>
<span class="s1">   },</span>
<span class="s1">   &quot;brand_id&quot;: &quot;&lt;Brand ID goes here&gt;&quot;,</span>
<span class="s1">   &quot;reference&quot;: &quot;Your order id&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>

<h4 id="charge-customer-card-as-a-recurring-payment">Charge customer card as a recurring payment<a class="headerlink" href="#charge-customer-card-as-a-recurring-payment" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>curl -X POST <span class="se">\</span>
  https://portal.klix.app/api/v1/purchases/&lt;Purchase id of recurring payment&gt;/charge <span class="se">\</span>
  -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Connection: keep-alive&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Host: portal.klix.app&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;accept-encoding: gzip, deflate&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;cache-control: no-cache&#39;</span> <span class="se">\</span>
  -d <span class="s1">&#39;{</span>
<span class="s1">   &quot;recurring_token&quot;: &quot;&lt;Recurring payment token&gt;&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>

<h2 id="api-usage-in-reservation-scenario-payment-execution-separated-from-authorization">API usage in reservation scenario (payment execution separated from authorization)<a class="headerlink" href="#api-usage-in-reservation-scenario-payment-execution-separated-from-authorization" title="Permanent link">&para;</a></h2>
<h3 id="reservation-step-by-step-guide">Reservation step by step guide<a class="headerlink" href="#reservation-step-by-step-guide" title="Permanent link">&para;</a></h3>
<ol>
<li>Create a purchase by submitting order data and additional <code class="codehilite"><span class="n">skip_capture</span></code> flag to Klix indicating card payment authorization separation from payment execution. Once purchase is created link to Klix hosted payment page will be returned as <code class="codehilite"><span class="n">checkout_url</span></code> field value. Payment identifier returned in purchase creation response should be stored for later use in capture or release requests. After customer is redirected to this page Klix will capture customer card details and will reserve the funds equal to purchase total amount.</li>
<li>There are several options how to proceed with reservation:<ul>
<li>Charge reserved amount. There's an option to either charge full reserved amount or amount that's smaller than initially reserved amount.</li>
<li>Release (return to customer) reserved amount. Note that reservations are also released automatically after a few days if charge request is not reveived.</li>
</ul>
</li>
</ol>
<h3 id="reservation-functionality-request-examples">Reservation functionality request examples<a class="headerlink" href="#reservation-functionality-request-examples" title="Permanent link">&para;</a></h3>
<p>These are simple request examples that illustrate Klix API usage. Always use <a href="https://portal.klix.app/api">API Reference</a> as a single source of truth.
Note that <code class="codehilite"><span class="o">&lt;</span><span class="n">Brand</span> <span class="n">ID</span> <span class="n">goes</span> <span class="n">here</span><span class="o">&gt;</span></code> and <code class="codehilite"><span class="o">&lt;</span><span class="n">Secret</span> <span class="k">key</span> <span class="n">goes</span> <span class="n">here</span><span class="o">&gt;</span></code> should be replaced with actual <code class="codehilite"><span class="n">Brand</span> <span class="n">ID</span></code> and <code class="codehilite"><span class="n">Secret</span> <span class="k">Key</span></code> received from Klix contact person.</p>
<h4 id="create-a-reservation-purchase">Create a reservation purchase<a class="headerlink" href="#create-a-reservation-purchase" title="Permanent link">&para;</a></h4>
<p>This option allows to create a purchase that will reserve purchase total amount in case of card payment. Store purchase <code class="codehilite"><span class="n">id</span></code> returned in response to either change or release funds reserved by this purchase. Redirect customer to <code class="codehilite"><span class="n">checkout_url</span></code> returned in purchase creation response to allow customer to enter card details. Note that in case of successful reservation purchase status will be changed to "hold" instead of "paid" as in case of regular card payment.</p>
<div class="codehilite"><pre><span></span>curl -X POST <span class="se">\</span>
  https://portal.klix.app/api/v1/purchases/ <span class="se">\</span>
  -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Connection: keep-alive&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Host: portal.klix.app&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;accept-encoding: gzip, deflate&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;cache-control: no-cache&#39;</span> <span class="se">\</span>
  -d <span class="s1">&#39;{</span>
<span class="s1">   &quot;success_callback&quot;: &quot;https://your.site/api/successfully-paid-callback-will-be-sent-to-this-end-point&quot;,</span>
<span class="s1">   &quot;success_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-of-successfull-payment&quot;,</span>
<span class="s1">   &quot;failure_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-of-failed-payment&quot;,</span>
<span class="s1">   &quot;cancel_redirect&quot;: &quot;https://your.site/customer-will-be-redirected-here-in-case-customer-decides-to-go-back-to-your-store-during-payment&quot;,</span>
<span class="s1">   &quot;purchase&quot;: {</span>
<span class="s1">      &quot;language&quot;: &quot;lv&quot;,</span>
<span class="s1">      &quot;products&quot;: [</span>
<span class="s1">         {</span>
<span class="s1">            &quot;price&quot;: 3000,</span>
<span class="s1">            &quot;name&quot;: &quot;Xiaomi Mi Smart Band 5&quot;</span>
<span class="s1">         },</span>
<span class="s1">         {</span>
<span class="s1">            &quot;price&quot;: 100,</span>
<span class="s1">            &quot;name&quot;: &quot;Screen protector for Xiaomi Mi Smart Band 5&quot;</span>
<span class="s1">         }</span>
<span class="s1">      ]</span>
<span class="s1">   },</span>
<span class="s1">   &quot;skip_capture&quot;: true,</span>
<span class="s1">   &quot;client&quot;: {</span>
<span class="s1">      &quot;email&quot;: &quot;test@test.com&quot;</span>
<span class="s1">   },</span>
<span class="s1">   &quot;payment_method_whitelist&quot;: [&quot;klix&quot;],</span>
<span class="s1">   &quot;brand_id&quot;: &quot;&lt;Brand ID goes here&gt;&quot;,</span>
<span class="s1">   &quot;reference&quot;: &quot;Your order id&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>

<h4 id="charge-funds-reserved-by-previously-created-purchase">Charge funds reserved by previously created purchase<a class="headerlink" href="#charge-funds-reserved-by-previously-created-purchase" title="Permanent link">&para;</a></h4>
<p>To change full amount previously reserved by specified purchase no request body should be sent. <code class="codehilite"><span class="o">&lt;</span><span class="n">Purchase</span> <span class="n">ID</span><span class="o">&gt;</span></code> is purchase identifier (field <code class="codehilite"><span class="n">id</span></code> value) received in purchase creation response.</p>
<div class="codehilite"><pre><span></span>curl --location --request POST <span class="s1">&#39;https://portal.klix.app/api/v1/purchases/&lt;Purchase ID&gt;/capture/&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span>
</pre></div>

<h4 id="charge-partial-funds-reserved-by-previously-created-purchase">Charge partial funds reserved by previously created purchase<a class="headerlink" href="#charge-partial-funds-reserved-by-previously-created-purchase" title="Permanent link">&para;</a></h4>
<p>To change amount that's smaller than previously reserved amount this new amount should be specified in request. <code class="codehilite"><span class="o">&lt;</span><span class="n">Purchase</span> <span class="n">ID</span><span class="o">&gt;</span></code> is purchase identifier (field <code class="codehilite"><span class="n">id</span></code> value) received in purchase creation response.</p>
<div class="codehilite"><pre><span></span>curl --location --request POST <span class="s1">&#39;https://portal.klix.app/api/v1/purchases/&lt;Purchase ID&gt;/capture/&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span> <span class="se">\</span>
--data-raw <span class="s1">&#39;{</span>
<span class="s1">    &quot;amount&quot;: 5</span>
<span class="s1">}</span>
<span class="s1">&#39;</span>
</pre></div>

<h4 id="release-funds-reserved-by-previously-created-purchase">Release funds reserved by previously created purchase<a class="headerlink" href="#release-funds-reserved-by-previously-created-purchase" title="Permanent link">&para;</a></h4>
<p>To release funds reserved by Purchase following request should be sent:</p>
<div class="codehilite"><pre><span></span>curl --location --request POST <span class="s1">&#39;https://portal.klix.app/api/v1/purchases/&lt;Purchase ID&gt;/release/&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Authorization: Bearer &lt;Secret key goes here&gt;&#39;</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../libraries/" title="Libraries" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Libraries
              </span>
            </div>
          </a>
        
        
          <a href="../widget-api/" title="Legacy Klix API (deprecated)" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Legacy Klix API (deprecated)
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Klix
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/klix-app" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/klixapp" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://lv.linkedin.com/company/klixapp" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>